<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbis Arcana - Waiting Room</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="container">
        <h1 class="title">Orbis Arcana</h1>
        <p>🔮 A new challenge is coming soon. Stay tuned!</p>
        <p id="status">Checking for new levels...</p>

<!-- 📢 Announcements Section -->
<div id="announcements-section">
    <p id="announcements">Loading announcements...</p>
</div>

    </div>

    <script type="module">
        import { riddles } from "./levels.js";

const urlParams = new URLSearchParams(window.location.search);
const lastLevel = parseInt(urlParams.get("level")) || 2;
const nextLevel = lastLevel + 1;

setInterval(() => {
    console.log("🔍 Checking for new levels...");
    if (riddles[nextLevel]) {
        console.log("🎉 New level found! Redirecting...");
        window.location.href = `level.html?level=${nextLevel}`;
    } else {
        document.getElementById("status").innerText = "No new levels yet. Keep waiting...";
    }
}, 5000); // ✅ Checks every 5 seconds

        // 🔹 ANNOUNCEMENTS SYSTEM (Only Message)
async function loadAnnouncements() {
    try {
        let response = await fetch("announcements.json");
        let data = await response.json();
        document.getElementById("announcements").innerText = data.message;
    } catch (error) {
        console.error("❌ Error loading announcements:", error);
        document.getElementById("announcements").innerText = "Failed to load announcements.";
    }
}

// Load announcements on page load
loadAnnouncements();

    </script>
</body>
</html>
